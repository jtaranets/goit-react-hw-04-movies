(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[7],{84:function(e,t,n){"use strict";n.r(t);var i=n(33),r=n(34),a=n(36),o=n(35),s=n(37),l=n(0),c=n.n(l),u=n(8),h=n.n(u),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var d=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return a.state={},a.styles={ellipsis:{position:"fixed",visibility:"hidden",top:0,left:0}},a.elements={},a.onResize=a.onResize.bind(a),a.onTruncate=a.onTruncate.bind(a),a.calcTargetWidth=a.calcTargetWidth.bind(a),a.measureWidth=a.measureWidth.bind(a),a.getLines=a.getLines.bind(a),a.renderLine=a.renderLine.bind(a),a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),f(t,[{key:"componentDidMount",value:function(){var e=this.elements.text,t=this.calcTargetWidth,n=this.onResize,i=document.createElement("canvas");this.canvasContext=i.getContext("2d"),t((function(){e&&e.parentNode.removeChild(e)})),window.addEventListener("resize",n)}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.forceUpdate(),this.props.width!==e.width&&this.calcTargetWidth()}},{key:"componentWillUnmount",value:function(){var e=this.elements.ellipsis,t=this.onResize,n=this.timeout;e.parentNode.removeChild(e),window.removeEventListener("resize",t),window.cancelAnimationFrame(n)}},{key:"innerText",value:function(e){var t=document.createElement("div"),n="innerText"in window.HTMLElement.prototype?"innerText":"textContent";t.innerHTML=e.innerHTML.replace(/\r\n|\r|\n/g," ");var i=t[n],r=document.createElement("div");return r.innerHTML="foo<br/>bar","foo\nbar"!==r[n].replace(/\r\n|\r/g,"\n")&&(t.innerHTML=t.innerHTML.replace(/<br.*?[\/]?>/gi,"\n"),i=t[n]),i}},{key:"onResize",value:function(){this.calcTargetWidth()}},{key:"onTruncate",value:function(e){var t=this.props.onTruncate;"function"===typeof t&&(this.timeout=window.requestAnimationFrame((function(){t(e)})))}},{key:"calcTargetWidth",value:function(e){var t=this.elements.target,n=this.calcTargetWidth,i=this.canvasContext,r=this.props.width;if(t){var a=r||Math.floor(t.parentNode.getBoundingClientRect().width);if(!a)return window.requestAnimationFrame((function(){return n(e)}));var o=window.getComputedStyle(t),s=[o["font-weight"],o["font-style"],o["font-size"],o["font-family"]].join(" ");i.font=s,this.setState({targetWidth:a},e)}}},{key:"measureWidth",value:function(e){return this.canvasContext.measureText(e).width}},{key:"ellipsisWidth",value:function(e){return e.offsetWidth}},{key:"trimRight",value:function(e){return e.replace(/\s+$/,"")}},{key:"getLines",value:function(){for(var e=this.elements,t=this.props,n=t.lines,i=t.ellipsis,r=t.trimWhitespace,a=this.state.targetWidth,o=this.innerText,s=this.measureWidth,l=this.onTruncate,u=this.trimRight,h=[],p=o(e.text).split("\n").map((function(e){return e.split(" ")})),f=!0,d=this.ellipsisWidth(this.elements.ellipsis),m=1;m<=n;m++){var v=p[0];if(0!==v.length){var y=v.join(" ");if(s(y)<=a&&1===p.length){f=!1,h.push(y);break}if(m===n){for(var g=v.join(" "),b=0,w=g.length-1;b<=w;){var T=Math.floor((b+w)/2);s(g.slice(0,T+1))+d<=a?b=T+1:w=T-1}var E=g.slice(0,b);if(r)for(E=u(E);!E.length&&h.length;){E=u(h.pop())}y=c.a.createElement("span",null,E,i)}else{for(var k=0,O=v.length-1;k<=O;){var W=Math.floor((k+O)/2);s(v.slice(0,W+1).join(" "))<=a?k=W+1:O=W-1}if(0===k){m=n-1;continue}y=v.slice(0,k).join(" "),p[0].splice(0,k)}h.push(y)}else h.push(),p.shift(),m--}return l(f),h}},{key:"renderLine",value:function(e,t,n){if(t===n.length-1)return c.a.createElement("span",{key:t},e);var i=c.a.createElement("br",{key:t+"br"});return e?[c.a.createElement("span",{key:t},e),i]:i}},{key:"render",value:function(){var e=this,t=this.elements.target,n=this.props,i=n.children,r=n.ellipsis,a=n.lines,o=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(n,["children","ellipsis","lines"]),s=this.state.targetWidth,l=this.getLines,u=this.renderLine,h=this.onTruncate,f=void 0;return"undefined"!==typeof window&&!(!t||!s)&&(a>0?f=l().map(u):(f=i,h(!1))),delete o.onTruncate,delete o.trimWhitespace,c.a.createElement("span",p({},o,{ref:function(t){e.elements.target=t}}),c.a.createElement("span",null,f),c.a.createElement("span",{ref:function(t){e.elements.text=t}},i),c.a.createElement("span",{ref:function(t){e.elements.ellipsis=t},style:this.styles.ellipsis},r))}}]),t}(l.Component);d.propTypes={children:h.a.node,ellipsis:h.a.node,lines:h.a.oneOfType([h.a.oneOf([!1]),h.a.number]),trimWhitespace:h.a.bool,width:h.a.number,onTruncate:h.a.func},d.defaultProps={children:"",ellipsis:"\u2026",lines:1,trimWhitespace:!1,width:0};var m=d,v=n(38),y=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(n=Object(a.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={reviews:[],isTruncated:!1},n.toggleTruncate=function(e){n.setState({isTruncated:!e})},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.id;Object(v.d)(t).then((function(t){var n=t.results;return e.setState({reviews:n})}))}},{key:"render",value:function(){var e=this.state,t=e.reviews,n=e.isTruncated;return c.a.createElement(c.a.Fragment,null,t.length>0?c.a.createElement("ul",{className:"reviews"},t.map((function(e){var t=e.author,i=e.content,r=e.id;return c.a.createElement("li",{key:r},c.a.createElement("h3",null,t),c.a.createElement(m,{lines:n?10:null,ellipsis:c.a.createElement("span",null,"...")},i))}))):c.a.createElement("p",null,"There are no reviews yet"))}}]),t}(l.Component);t.default=y}}]);
//# sourceMappingURL=reviews-page.a72010a1.chunk.js.map